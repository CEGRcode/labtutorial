<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>PEGR - IT Tutorial</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">IT Tutorial</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Welcome</a>
                    </li>
                    <li >
                        <a href="../galaxy/">Galaxy</a>
                    </li>
                    <li >
                        <a href="../planemo/">Planemo</a>
                    </li>
                    <li class="active">
                        <a href="./">PEGR</a>
                    </li>
                    <li >
                        <a href="../grails/">Grails</a>
                    </li>
                    <li >
                        <a href="../debug/">Debug</a>
                    </li>
                    <li >
                        <a href="../FAQ/">FAQ</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../planemo/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../grails/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#pegr">PEGR</a></li>
            <li><a href="#pre-install">Pre-Install</a></li>
            <li><a href="#pegr-install">PEGR Install</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="pegr">PEGR</h1>
<h2 id="pre-install">Pre-Install</h2>
<p>Here are the list of tools we will install prior to installing local PEGR:</p>
<ul>
<li>Curl</li>
<li>Sdkman</li>
<li>Grails</li>
<li>Groovy</li>
<li>Java</li>
<li>MAMP</li>
</ul>
<p>Install curl (For Windows, use Git Bash)</p>
<p>Install sdkman (<a href="http://sdkman.io/install.html">tutorial</a>):</p>
<ul>
<li><code>$ curl -s "https://get.sdkman.io" | bash</code></li>
<li><code>$ source "$HOME/.sdkman/bin/sdkman-init.sh"</code></li>
<li><code>$ sdk version</code> # check your sdkman version</li>
</ul>
<p>Install Grails:</p>
<ul>
<li><code>$ sdk install grails 2.5.4</code></li>
<li><code>$ sdk list grails</code>      # check your installation of grails</li>
<li>
<p><code>$ sdk use grails 2.5.4</code> # change your default grails to version 2.5.4</p>
</li>
<li>
<p>Now close the terminal and quit the terminal in your dashboard. [Important!]</p>
</li>
</ul>
<p>Install Groovy:</p>
<ul>
<li><code>$ sdk install groovy 2.4.4</code></li>
<li><code>$ sdk list groovy</code> # check your current version of groovy</li>
</ul>
<p>Install Java:</p>
<ul>
<li><code>$ sdk install java 7u141-zulu</code> # install Java (specific version needed for current PEGR)</li>
<li><code>$ sdk install java 8u141-zulu</code> # alternate version that is also compatible</li>
<li><code>$ sdk list java</code> # Check your current version of java</li>
</ul>
<p>Install MAMP:
* <code>https://www.mamp.info/en/downloads/</code> # download link</p>
<ul>
<li>
<p>Now Close your terminal and quit the terminal on the dashboard.[Need to do above step, if you want to run pegr locally ;)]</p>
</li>
<li>
<p><code>$ grails</code> # Make Grails install necessary dependencies</p>
</li>
<li>Press ctrl+C to exit the prompt.</li>
</ul>
<h2 id="pegr-install">PEGR Install</h2>
<p>•   Go to any directory of your choice and clone the PEGR git repo.</p>
<ul>
<li><code>$ git clone https://github.com/seqcode/pegr.git</code> # clone "pegr" in your directory</li>
</ul>
<p>•   Navigate to pegr/pegr/grails-app/conf/BuildConfig.groovy and edit these lines</p>
<pre><code>grails.project.target.level = 1.6 -&gt; grails.project.target.level = 1.7
grails.project.source.level = 1.6 -&gt; grails.project.source.level = 1.7
</code></pre>
<p>Download the <a href="https://psu.app.box.com/file/175943271869">MySQL file</a> and rename it to pegrDB.sql</p>
<p>Go to System Preferences and find MySql icon, then click to start the SQL server.
* <code>$ mysql.server start</code> -(mac) if you have installed using homebrew</p>
<ul>
<li>Open the terminal and navigate to the same directory as the pegrDB.sql file</li>
<li><code>$ mysql -u root -p</code> # Connect to your server</li>
</ul>
<p>This will prompt you for that password it gave you. [ if you installed MySQL using the .dmg file] otherwise, in the case of homebrew, there is no password set for root. You should be able to see the prompt mysql&gt;</p>
<p>After successfully connected to the MySQL, set the password for root</p>
<ul>
<li><code>$ mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY '&lt;your new password&gt;';</code></li>
</ul>
<p>•   Create and switch to the new database:</p>
<pre><code>mysql&gt; Create database pegr;
mysql&gt; use pegr;
mysql&gt; source pegrDB.sql
mysql&gt; show tables;
</code></pre>
<p>• Successful output <a href="../image/pegr/pegr12.png">here</a></p>
<p>Create a new user to access your “pegr” database</p>
<pre><code>* `$ mysql&gt; create user 'your_ username'@'localhost' identified by 'your_password';`
* `$ mysql&gt; grant all privileges on *.* to 'your_username'@'localhost';`
</code></pre>
<p>For an example,</p>
<pre><code>mysql&gt; create user hedgiejo@localhost identified by mypassword;
mysql&gt; grant all privileges on *.* to hedgiejo@localhost;
</code></pre>
<p>Modify an existing account to gain a login credentials (need a valid non-WebAccess account)
Within your pegrDB, locate the user "labadmin" and replace the password value:</p>
<pre><code>`$ mysql&gt; UPDATE user set password="password" where username="labadmin";`
</code></pre>
<p>Open the BuildConfig.groovy file at pegr/grails-app/conf/BuildConfig.groovy and check the plugins block and verify that the build for the tomcat is appropriate to your version and add the below lines within the plugin block</p>
<pre><code>compile ":spring-security-core:2.0.0"
compile "org.grails.plugins:quartz:1.0.1"
compile "org.grails.plugins:mail:1.0.7"
</code></pre>
<p>Also, within the dependencies block, uncomment runtime 'mysql'  [if it is commented]</p>
<p>Now open DataSource.groovy at the pegr/grails-app/conf/DataSource.groovy and edit the datasource block to look like this:</p>
<pre><code>environments {
    development {
        dataSource {
            dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "database_url"
            username=" your_username"
            password="your_password"
        }
    }
}
</code></pre>
<p>Now go into the pegr folder and run pegr
  * <code>$ grails run-app</code></p>
<p>This will successfully start and provide with you an url (http://localhost:8081/pegr) that usually directs you to the login screen of PEGR.</p>
<p>Login using the following labadmin credentials:</p>
<pre><code>Username: labadmin
Password: passcode
</code></pre>
<p>CONGRATULATIONS, YOU HAVE SUCCESSFULLY SET UP THE LOCAL PEGR!</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
